{% extends 'base/admin.html' %}
{% load static %}
{% block title %}
  Admin Reaction Management
{% endblock %}
{% block stylesheet %}
  <link rel="stylesheet" href="{% static 'style/admin.css/admin.commodities.css' %}" />
{% endblock %}

{% block content %}
  <br />
  <div class="main-content" id="main-content">
    <div class="container">
      <h3 style="font-weight:bold;">ADMIN REACTION MANAGEMENT</h3>
      <a href="{% url "admin-discussion" %}"><i class="fa-solid fa-arrow-left"></i> Forum</a>
      <hr style="color: black;" />
      <div class="card-container">
        <div class="row">
          <div class="col-xl-3 col-sm-6 col-12">
            <div class="card">
              <div class="card-content">
                <div class="card-body">
                  <div class="media d-flex">
                    <div class="align-self-center">
                      <i class="icon-pencil primary font-large-2 float-left"></i>
                    </div>
                    <div class="media-body text-right" style="height: 58px;">
                      <h3 style="text-decoration: underline;">to be update</h3>
                      <span>Total Likes</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 col-12">
            <div class="card">
              <div class="card-content">
                <div class="card-body">
                  <div class="media d-flex">
                    <div class="align-self-center">
                      <i class="icon-speech warning font-large-2 float-left"></i>
                    </div>
                    <div class="media-body text-right" style="height: 58px;">
                      <h3 style="text-decoration: underline;">to be update</h3>
                      <span>Total Dislikes</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 col-12">
            <div class="card">
              <div class="card-content">
                <div class="card-body">
                  <div class="media d-flex">
                    <div class="align-self-center">
                      <i class="icon-speech warning font-large-2 float-left"></i>
                    </div>
                    <div class="media-body text-right" style="height: 58px;">
                        <h3 style="text-decoration: underline;">to be update</h3>
                        <span>Average Likes</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% comment %} <div class="row">
          <div class="col-xl-6 col-sm-6 col-12">
            <div class="card">
              <div class="card-content">
                <div class="card-body">
                  <div class="media d-flex">
                    <div class="align-self-center">
                      <i class="icon-pencil primary font-large-2 float-left"></i>
                    </div>
                    <div class="media-body text-right" style="height: auto;">
                      <h3 style="text-decoration: underline;">{{ most_liked_post_title|capfirst }}</h3>
                      <span>Most Liked</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div> {% endcomment %}
        
      </div>
      <br />
      <div class="button-container-head">
        <a href="{% url 'admin-search' %}" id="approved-data-button" style="background-color: #0C356A; color: #fff; border: 0; border-radius: 3px; padding: 5px; font-weight: bold;">Search Analytics</a>
        <a href="{% url 'admin-comment' %}" id="approved-data-button" style="background-color: #0C356A; color: #fff; border: 0; border-radius: 3px; padding: 5px; font-weight: bold;">Comments Analytics</a>
      </div>

      <hr />
      <div class="table-container">
        <table id="reactionTable" class="reaction-table table table-bordered">
          <thead style="color: #fff; font-size: 13px; background-color: #0C356A; font-weight: bolder;">
            <tr>
              <th>ID</th>
              <th>Title</th>
              <th>Rating</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody style="font-size: 12px;">
            {% for reaction in all_reactions %}
              <tr>
                <td>{{ reaction.reaction_id }}</td>
                <td>{{ reaction.discussion.discussion_title|capfirst }}</td>
                <td>{{ reaction.rating }}</td>
                <td>
                  <a data-placement="top" data-toggle="tooltip" title="delete" href="/delete-reaction/{{ reaction.reaction_id }}" class="btn btn-danger btn-sm"><i class="fa-solid fa-trash"></i></a>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{% endblock %}

{% block script %}
  <script>
    $(document).ready(function () {
      let table = $('#reactionTable').DataTable({
        language: {
          lengthMenu: '_MENU_',
          search: '',
          searchPlaceholder: 'Search...'
        },
        lengthMenu: [
          [3, 5, 7, 10, 25, -1],
          [3, 5, 7, 10, 25, 'All']
        ],
        paging: true,
        lengthChange: true,
        autoWidth: false,
        bInfo: true,
        bSort: true,
        responsive: true,
        buttons: [
          {
            text: 'CSV',
            extend: 'csv'
          },
          {
            text: 'PDF',
            extend: 'pdf'
          }
        ],
        dom: '<"row"<"col-md-1"l><"col-md-8"B><"col-md-3"f>>' + '<"row"<"col-md-12"tr>>' + '<"row"<"col-md-5"i><"col-md-7"p>>'
      })
    })
  </script>

  {% if messages %}
    {% for message in messages %}
      {% if message.tags == 'success' %}
        <script>
          // Display SweetAlert success message
          Swal.fire({
            icon: 'success',
            title: 'Success!',
            text: '{{ message }}'
          })
        </script>
        {% else %}
        <script>
          // Display SweetAlert success message
          Swal.fire({
            icon: 'error',
            title: 'Error!',
            text: '{{ message }}'
          })
        </script>
      {% endif %}
    {% endfor %}
  {% endif %}
{% endblock %}
